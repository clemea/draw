"use strict";var draw={dotOptions:{color:"#000",radius:5,initialPositionX:100,initialPositionY:100,dotsToConnect:2},lineOptions:{color:"green"},globalOptions:{global_width:window.innerWidth,global_height:window.innerHeight,ratio:1},interface:{dotsConnectInput:document.getElementById("dots-connect-count"),dotsColorInput:document.getElementById("dots-color")},canvas:document.getElementById("canvas"),context:canvas.getContext("2d"),dots:[],scale:function(){this.globalOptions.global_width=window.innerWidth,this.globalOptions.global_height=window.innerHeight,this.context.webkitBackingStorePixelRatio<2&&(this.globalOptions.ratio=window.devicePixelRatio||1),this.canvas.setAttribute("width",this.globalOptions.global_width*this.globalOptions.ratio),this.canvas.setAttribute("height",this.globalOptions.global_height*this.globalOptions.ratio)},init:function(){this.context.save(),this.context.scale(this.globalOptions.ratio,this.globalOptions.ratio),this.scale(),this.drawDot(this.dotOptions.initialPositionX,this.dotOptions.initialPositionY),this.saveDot(this.dotOptions.initialPositionX,this.dotOptions.initialPositionY),this.context.restore(),this.handleEvents()},drawDot:function(t,i){this.context.beginPath(),this.context.arc(t,i,this.dotOptions.radius,0,2*Math.PI,!1),this.context.fillStyle=this.dotOptions.color,this.context.fill()},saveDot:function(t,i){this.dots.push({x:t,y:i})},drawLine:function(t,i){this.context.beginPath(),this.context.moveTo(t.x,t.y),this.context.lineTo(i.x,i.y),this.context.strokeStyle=this.lineOptions.color,this.context.stroke()},getMousePos:function(t,i){var o=t.getBoundingClientRect();return{x:i.clientX-o.left,y:i.clientY-o.top}},getLastDots:function(){return this.dots.slice(-this.dotOptions.dotsToConnect)},changeConnectedDotsCount:function(t){var i=t.target.value;i>0?(this.interface.dotsConnectInput.classList.remove("error"),this.dotOptions.dotsToConnect=Math.floor(i)):this.interface.dotsConnectInput.classList.add("error")},changeLineColor:function(t){this.lineOptions.color=t.target.value},connectDots:function(t){var i=this.getMousePos(canvas,t),o=this.getLastDots();this.drawDot(i.x,i.y);for(var n=0;n<o.length;n++)this.drawLine(i,o[n]);this.saveDot(i.x,i.y)},handleEvents:function(){var t=this;this.canvas.addEventListener("mousedown",function(i){return t.connectDots(i)},!1),this.interface.dotsConnectInput.addEventListener("input",function(i){return t.changeConnectedDotsCount(i)}),this.interface.dotsColorInput.addEventListener("change",function(i){return t.changeLineColor(i)})},setup:function(){this.context&&this.init()}};draw.setup();